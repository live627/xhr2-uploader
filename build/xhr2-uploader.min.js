String.prototype.hashCode=function(){var e=0,t=0,n=this.length;if(0===n)return e;for(;n>t;t++)e=(e<<5)-e+this.charCodeAt(t),e|=0;return e},function($){$.fn.uploader=function(e){var e=$.extend({url:"upload.php",maxSize:10240,locale:{dropZoneTitle:"Drop files here",dropZoneSubText:"In order to attach them to this post"},fileDataValidator:function(e,t,n){return t>maxSize?(alert(e+": icon too large. Try to get it to be under "+maxSize/1024+" KB."),!1):!0},ajaxEvents:{error:function(e,t,n,a){var o=$.parseJSON(e.responseText),r="";$.each(o,function(e,t){r+='<div class="error">'+t+"</div>"}),$("div#icon"+a).addClass("errorbox").removeClass("information").html(r)},success:function(e,t){$("div#icon"+t).html(e),$("input[type=file]#icon").remove()}},xhrUploadEvents:{progress:function(e,t){if(e.lengthComputable){e.loaded/e.total;$("progress#icon"+t).attr({value:e.loaded,max:e.total})}},loadstart:function(e,t){$("#icon_container").children("div:not([id^=dropzone])").remove().end().append('<div id="icon'+t+'" class="information center"><progress id="icon'+t+'"/></div>')},abort:function(e,t){$("progress").remove()},cancel:function(e,t){$("progress").remove()}}},e),t=function(t){$.each(t,function(t,n){var a=n.name,o=n.size,r=n.type;a.hashCode()+Math.random();if(e.fileDataValidator(a,o,r)===!0){if(e.reader){var i=new FileReader;return i.onload=function(){$("textarea#"+$element.attr("id")).val(this.result)},void i.readAsText(n)}var s=new FormData;s.append("filename",n),$.ajax({url:e.url+";filename="+encodeURIComponent(a),type:"POST",xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&$.each(xhrUploadEvents,function(e,t){myXhr.upload.addEventListener(e,t,!1)}),myXhr},success:e.ajaxEvents.success,error:e.ajaxEvents.error,data:s,cache:!1,contentType:!1,processData:!1})}})};return this.each(function(){var e=this,n=$(e),a=$('<div id="dropzone'+n.attr("id")+'" class="dropzone"><div class=" ">'+dropZoneTitle+"</div><small>"+dropZoneSubText+"</small></div>").hide().prependTo(n.parent()),o=!1,r=(new Date).getTime(),i={dragover:function(e){n.parent().parent().parent().is(":visible")&&(e.dataTransfer.dropEffect="none",e.stopPropagation(),e.preventDefault(),o||(n.fadeOut("fast",function(){a.fadeIn()}),o=!0),r=(new Date).getTime())},dragleave:function(e){n.parent().parent().parent().is(":visible")&&setTimeout(function(){(new Date).getTime()-r>200&&(a.fadeOut("fast",function(){n.fadeIn()}),o=!1)},200)}},s={dragover:function(e){e.dataTransfer.dropEffect="copy",r=(new Date).getTime(),a.toggleClass("highlight",!0),e.stopPropagation(),e.preventDefault()},dragleave:function(e){a.toggleClass("highlight",!1)},drop:function(e){var r=e.dataTransfer;if(e.stopPropagation(),e.preventDefault(),!r&&!(r.files||!$.browser.webkit&&r.types.contains&&r.types.contains("Files")))return!1;o=!1;var i=r.files;a.fadeOut("fast",function(){n.fadeIn(function(){t(i)})})}};$.each(i,function(e,t){document.body.addEventListener(e,t,!1)}),$.each(s,function(t,n){document.getElementById("dropzone"+e.id).addEventListener(t,n,!1)}),n.change(function(){t(this.files)})})}}(jQuery);
//# sourceMappingURL=build/xhr2-uploader.min.js.map
